<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>DLSUD Campus Navigation</title>
  <link rel="stylesheet" href="navigation.css" />
  <link href="https://fonts.googleapis.com/css2?family=Alumni+Sans:wght@400;700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- HEADER -->
  <header class="topbar">
  <div class="left-group">
    <img src="images/dlsud-logo.png" class="logo" alt="DLSUD Logo" />
    <h1 class="title">
      <span class="highlight">DLSUD</span> Campus Navigation System
    </h1>
  </div>

  <!-- Right group for buttons -->
  <div class="right-group">
    <button id="backBtn" class="nav-button">
      <img src="images/campus-graph.png" alt="Back" class="nav-icon" />
    </button>

    <button id="homeBtn" class="home-button">
      <img src="images/home-icon.png" alt="Home" class="home-icon" />
    </button>
  </div>
</header>

  <!-- MAIN CONTENT -->
  <main class="container">
    <!-- LEFT PANEL -->
    <section class="controls">
      <label for="start">Start Location:</label>
      <select id="start" required>
        <option value="">Select Location</option>
        <option value="G1">G1</option>
        <option value="Rotunda">Rotunda</option>
        <option value="ICTC">ICTC</option>
        <option value="CIH">CIH</option>
        <option value="JFH">JFH</option>
        <option value="PCH">PCH</option>
        <option value="Ayuntamiento">Ayuntamiento</option>
        <option value="COS">COS</option>
        <option value="Milas">Milas</option>
        <option value="Library">Library</option>
        <option value="Church">Church</option>
        <option value="Museo">Museo</option>
        <option value="Cafe Museo">Cafe Museo</option>
        <option value="Dorm">Dorm</option>
        <option value="FS">FS</option>
        <option value="LDH">LDH</option>
        <option value="VBH">VBH</option>
        <option value="FCH">FCH</option>
        <option value="GMH">GMH</option>
        <option value="CEAT">CEAT</option>
        <option value="CTH">CTH</option>
        <option value="MTH">MTH</option>
        <option value="CBAA">CBAA</option>
        <option value="GDO">GDO</option>
        <option value="SHS">SHS</option>
        <option value="ULS">ULS</option>
        <option value="G3">G3</option>
      </select>

      <label for="end">Destination:</label>
      <select id="end" required>
        <option value="">Select Location</option>
        <option value="G1">G1</option>
        <option value="Rotunda">Rotunda</option>
        <option value="ICTC">ICTC</option>
        <option value="CIH">CIH</option>
        <option value="JFH">JFH</option>
        <option value="PCH">PCH</option>
        <option value="Ayuntamiento">Ayuntamiento</option>
        <option value="COS">COS</option>
        <option value="Milas">Milas</option>
        <option value="Library">Library</option>
        <option value="Church">Church</option>
        <option value="Museo">Museo</option>
        <option value="Cafe Museo">Cafe Museo</option>
        <option value="Dorm">Dorm</option>
        <option value="FS">FS</option>
        <option value="LDH">LDH</option>
        <option value="VBH">VBH</option>
        <option value="FCH">FCH</option>
        <option value="GMH">GMH</option>
        <option value="CEAT">CEAT</option>
        <option value="CTH">CTH</option>
        <option value="MTH">MTH</option>
        <option value="CBAA">CBAA</option>
        <option value="GDO">GDO</option>
        <option value="SHS">SHS</option>
        <option value="ULS">ULS</option>
        <option value="G3">G3</option>
      </select>

      <button id="compute">Compute Shortest Path</button>
    </section>

    <!-- RIGHT PANEL -->
    <section class="results">
      <h2>Shortest Route:</h2>
      <p id="route">No route selected yet.</p>
      <hr>
      <p><span id="totaldistance">Total Distance:</span> <span id="distance">N/A</span></p>
    </section>
  </main>

  <!-- FOOTER -->
  <footer>
    v1.0 | 2025 DLSUDToolkit
  </footer>
<div id="imageOverlay" class="overlay">
  <span class="close">&times;</span>
  <img class="overlay-content" src="images/campus-nodes.png" alt="Campus Map" />
</div>


  <!-- SCRIPT -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
  const startSelect = document.getElementById('start');
  const endSelect = document.getElementById('end');
  const computeBtn = document.getElementById('compute');
  const routeDisplay = document.getElementById('route');
  const distanceDisplay = document.getElementById('distance');
  const homeBtn = document.getElementById("homeBtn");

  computeBtn.addEventListener('click', async () => {
    const start = startSelect.value;
    const end = endSelect.value;

    if (!start || !end || start === end) {
      routeDisplay.textContent = "Please select two different locations.";
      routeDisplay.style.color = "#cc0000";
      distanceDisplay.textContent = "N/A";
      return;
    }

    routeDisplay.textContent = "Calculating route...";
    routeDisplay.style.color = "#333";
    distanceDisplay.textContent = "â³";

    try {
      const result = await window.pywebview.api.get_shortest_path(start, end);

      if (result.error) {
        routeDisplay.textContent = result.error;
        routeDisplay.style.color = "#cc0000";
        distanceDisplay.textContent = "N/A";
      } else {
        routeDisplay.textContent = result.path_string;
        routeDisplay.style.color = "#2c5e2e";
        distanceDisplay.textContent = `${result.distance} meters`;
      }
    } catch (err) {
      routeDisplay.textContent = "Error connecting to backend.";
      routeDisplay.style.color = "#cc0000";
      distanceDisplay.textContent = "N/A";
      console.error(err);
    }
  });

  homeBtn.addEventListener("click", () => {
    window.location.href = "home.html"; 
    // or "/" if homepage is root
  });
});

// Get elements
const navBtn = document.getElementById("backBtn");
const overlay = document.getElementById("imageOverlay");
const closeBtn = document.querySelector(".close");

// Show overlay when nav button is clicked
navBtn.addEventListener("click", () => {
  overlay.style.display = "flex"; // flex centers content
});

// Hide overlay when close button is clicked
closeBtn.addEventListener("click", () => {
  overlay.style.display = "none";
});

// Hide overlay when clicking outside the image
overlay.addEventListener("click", (e) => {
  if (e.target === overlay) {
    overlay.style.display = "none";
  }
});
  </script>
</body>
</html>